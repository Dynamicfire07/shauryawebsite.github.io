<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>IB Physics Mastery Checklist</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-900">
  <nav class="bg-white shadow">
    <div class="container mx-auto px-4 py-4 flex justify-between items-center">
      <a href="index.html" class="text-xl font-bold">Study Tracker</a>
      <div class="space-x-4">
        <a href="physics.html" class="text-blue-600 font-semibold">Physics</a>
      </div>
    </div>
  </nav>
  <main class="container mx-auto p-4 md:p-8">
    <div class="flex justify-between items-center mb-6">
      <h1 class="text-2xl font-bold">IB Physics 2025 â€“ Mastery Checklist</h1>
      <button id="printBtn" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Download PDF</button>
    </div>
    <div id="subunitContainer" class="space-y-6"></div>
  </main>

  <div id="kanbanModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center">
    <div class="bg-white rounded-lg w-11/12 max-w-4xl p-6">
      <h2 class="text-xl font-bold mb-4">Progress Kanban</h2>
      <div class="grid grid-cols-1 md:grid-cols-4 gap-4" id="kanbanBoard">
        <div>
          <h3 class="font-semibold text-center mb-2">No</h3>
          <ul id="col-no" class="space-y-1"></ul>
        </div>
        <div>
          <h3 class="font-semibold text-center mb-2">Mid</h3>
          <ul id="col-mid" class="space-y-1"></ul>
        </div>
        <div>
          <h3 class="font-semibold text-center mb-2">Good</h3>
          <ul id="col-good" class="space-y-1"></ul>
        </div>
        <div>
          <h3 class="font-semibold text-center mb-2">Excellent</h3>
          <ul id="col-excellent" class="space-y-1"></ul>
        </div>
      </div>
      <div class="text-right mt-4 space-x-2">
        <button id="confirmPrint" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Print PDF</button>
        <button id="closeKanban" class="px-4 py-2 border rounded">Close</button>
      </div>
    </div>
  </div>

  <script>
    const subunits = [
      { section: 'A. Space, time and motion', items: [
        { code: 'A.1', title: 'Kinematics' },
        { code: 'A.2', title: 'Forces & momentum' },
        { code: 'A.3', title: 'Work, energy & power' },
        { code: 'A.4', title: 'Rigid body mechanics' },
        { code: 'A.5', title: 'Galilean & special relativity' }
      ]},
      { section: 'B. The particulate nature of matter', items: [
        { code: 'B.1', title: 'Thermal transfers' },
        { code: 'B.2', title: 'Greenhouse effect' },
        { code: 'B.3', title: 'Gas laws' },
        { code: 'B.4', title: 'Thermodynamics (HL)' },
        { code: 'B.5', title: 'Current & circuits' }
      ]},
      { section: 'C. Wave behaviour', items: [
        { code: 'C.1', title: 'Simple harmonic motion' },
        { code: 'C.2', title: 'Wave model' },
        { code: 'C.3', title: 'Wave phenomena' },
        { code: 'C.4', title: 'Standing waves' },
        { code: 'C.5', title: 'Doppler effect' }
      ]},
      { section: 'D. Fields', items: [
        { code: 'D.1', title: 'Gravitational fields' },
        { code: 'D.2', title: 'Electric & magnetic fields' },
        { code: 'D.3', title: 'Motion in EM fields' },
        { code: 'D.4', title: 'Induction (HL)' }
      ]},
      { section: 'E. Nuclear and quantum physics', items: [
        { code: 'E.1', title: 'Structure of the atom' },
        { code: 'E.2', title: 'Quantum physics (HL)' },
        { code: 'E.3', title: 'Radioactive decay' },
        { code: 'E.4', title: 'Fission' },
        { code: 'E.5', title: 'Fusion & stars' }
      ]}
    ];

    const container = document.getElementById('subunitContainer');
    const stateKey = 'physics-conf';
    const saved = JSON.parse(localStorage.getItem(stateKey) || '{}');

    subunits.forEach(group => {
      const section = document.createElement('section');
      section.className = 'bg-white rounded shadow p-4';
      const heading = document.createElement('h2');
      heading.textContent = group.section;
      heading.className = 'text-xl font-semibold mb-4';
      section.appendChild(heading);

      group.items.forEach(item => {
        const row = document.createElement('div');
        row.className = 'flex flex-col md:flex-row md:items-center md:justify-between border-b last:border-b-0 py-2';

        const label = document.createElement('span');
        label.textContent = `${item.code} ${item.title}`;
        row.appendChild(label);

        const select = document.createElement('select');
        select.className = 'mt-2 md:mt-0 border rounded p-1';
        select.dataset.code = item.code;
        ['','No','Mid','Good','Excellent'].forEach(opt => {
          const o = document.createElement('option');
          o.value = opt;
          o.textContent = opt === '' ? 'Confidence' : opt;
          if(saved[item.code] === opt) o.selected = true;
          select.appendChild(o);
        });
        select.addEventListener('change', () => {
          saved[item.code] = select.value;
          localStorage.setItem(stateKey, JSON.stringify(saved));
        });
        row.appendChild(select);

        section.appendChild(row);
      });

      container.appendChild(section);
    });

    const modal = document.getElementById('kanbanModal');
    const cols = {
      'No': document.getElementById('col-no'),
      'Mid': document.getElementById('col-mid'),
      'Good': document.getElementById('col-good'),
      'Excellent': document.getElementById('col-excellent')
    };

    document.getElementById('printBtn').addEventListener('click', () => {
      Object.values(cols).forEach(c => c.innerHTML = '');
      subunits.forEach(group => {
        group.items.forEach(item => {
          const level = saved[item.code] || '';
          if(level && cols[level]){
            const li = document.createElement('li');
            li.textContent = `${item.code} ${item.title}`;
            cols[level].appendChild(li);
          }
        });
      });
      modal.classList.remove('hidden');
      modal.classList.add('flex');
    });

    document.getElementById('closeKanban').addEventListener('click', () => {
      modal.classList.add('hidden');
      modal.classList.remove('flex');
    });

    document.getElementById('confirmPrint').addEventListener('click', () => {
      window.print();
    });
  </script>
</body>
</html>
